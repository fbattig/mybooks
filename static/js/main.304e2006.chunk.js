(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},26:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(15),s=a.n(r),l=a(32),c=a(6),i=a(7),u=a(10),d=a(8),m=a(9),h=a(4),b=a(33),k=a(13),p="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:f},E=a(31),N=function(e){var t=e.bookId,a=e.shelf,o=e.bookCoverImage,r=e.bookTitle,s=e.bookAuthors,l=e.handleStatusUpdate;return n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(o,'")')}}),n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{defaultValue:a,onChange:function(e){l({id:t},e.target.value)}},n.a.createElement("option",{value:"none",disabled:!0},"Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))),n.a.createElement("div",{className:"book-title"},r),n.a.createElement("div",{className:"book-authors"},s.map(function(e){return n.a.createElement("span",{key:e},e,n.a.createElement("br",null))})),n.a.createElement("div",{className:"book-authors"},n.a.createElement(E.a,{className:"more",to:"/details/".concat(t)},"More...")))};N.defaultProps={shelf:"none",bookCoverImage:"",bookTitle:"Title",bookAuthors:["No Authors"]};var g=N,y=function(e){var t=e.bookShelfTitle,a=e.books,o=e.handleStatusUpdate;return n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},t),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},a.length>0&&a.map(function(e){return n.a.createElement("li",{key:e.id},n.a.createElement(g,Object.assign({shelf:e.shelf,bookId:e.id,bookCoverImage:e.imageLinks.thumbnail,bookTitle:e.title,bookAuthors:e.authors,handleStatusUpdate:o},e)))}))))};y.defaultProps={bookShelfTitle:"No title set",books:[]};var S=y,j=function(e){var t=e.books,a=e.handleBookStatusUpdate;return n.a.createElement("div",{className:"list-books"},n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads app")),n.a.createElement("div",{className:"list-books-content"},[{name:"Currently Reading",slug:"currentlyReading"},{name:"Want to Read",slug:"wantToRead"},{name:"Read",slug:"read"}].map(function(e){return n.a.createElement(S,{key:e.slug,bookShelfTitle:e.name,books:t.filter(function(t){return t.shelf===e.slug}),handleStatusUpdate:a})})),n.a.createElement("div",{className:"open-search"},n.a.createElement(E.a,{to:"/search"},"Add a book")))};j.defaultProps={books:[]};var O=j,T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={searchedList:[],query:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSearchUpdate",value:function(e){var t=this,a=e.target.value;this.setState({query:a}),function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(k.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})}(a).then(function(e){for(var a=null==e?0:e,o=t.props.books,n=0;n<a.length;n++)for(var r=0;r<o.length;r++){if(a[n].id===o[r].id){a[n].shelf=o[r].shelf;break}a[n].shelf="none"}t.setState({searchedList:a})})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(E.a,{className:"close-search",to:"/"},"Back"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",name:"searchTerm",placeholder:"Search by title or author",onChange:function(t){e.handleSearchUpdate(t)},value:this.state.query}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("p",{className:"important-note search-note"},"Important: The backend API uses a fixed set of cached search results and is limited to a particular set of search terms, which can be found in\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/computationalcore/myreads/blob/master/SEARCH_TERMS.md"},"SEARCH_TERMS.md")),n.a.createElement(S,{bookShelfTitle:"Search Results",books:this.state.searchedList,handleStatusUpdate:this.props.handleBookStatusUpdate}),n.a.createElement("ol",{className:"books-grid"})))}}]),t}(o.Component);T.defaultProps={books:[]};var U=T,R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={book:null},a.loadBook=a.loadBook.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadBook(this.props.match.params.bookId)}},{key:"loadBook",value:function(e){var t,a=this;(t=e,fetch("".concat(p,"/books/").concat(t),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.book})).then(function(e){return a.setState({book:e})})}},{key:"render",value:function(){var e=this.state.book;return e?n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(E.a,{className:"close-search",to:"/"},"Close"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",name:"searchTerm",value:e.title,readOnly:!0}))),n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},"\xa0"),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},n.a.createElement("li",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(e.imageLinks.thumbnail,'")')}})),n.a.createElement("div",{className:"book-title"},e.title),n.a.createElement("div",{className:"book-authors"},e.authors.map(function(e){return n.a.createElement("span",{key:e},e,n.a.createElement("br",null))})),n.a.createElement("div",{className:"book-authors"},e.subtitle))))))):n.a.createElement("p",null,"Loading book")}}]),t}(o.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={bookList:[]},a.loadList=a.loadList.bind(Object(h.a)(Object(h.a)(a))),a.handleBookStatusUpdate=a.handleBookStatusUpdate.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"loadList",value:function(){var e=this;fetch("".concat(p,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){return e.setState({bookList:t})})}},{key:"handleBookStatusUpdate",value:function(e,t){var a=this;(function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(k.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})})(e,t).then(function(e){return e&&a.loadList()})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app"},n.a.createElement(b.a,{path:"/search",render:function(){return n.a.createElement(U,{handleBookStatusUpdate:e.handleBookStatusUpdate,books:e.state.bookList})}}),n.a.createElement(b.a,{path:"/details/:bookId",component:R}),n.a.createElement(b.a,{path:"/",exact:!0,render:function(){return n.a.createElement(O,{handleBookStatusUpdate:e.handleBookStatusUpdate,books:e.state.bookList})}}))}}]),t}(n.a.Component);a(26),a(28);s.a.render(n.a.createElement(l.a,{basename:"/mybooks"},n.a.createElement(B,null)),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.304e2006.chunk.js.map